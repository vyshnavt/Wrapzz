<div class="main">
    <mat-tab-group mat-align-tabs="center">
        <mat-tab label="Name">
            <div class="conatinerbox">
                <div class="resultbox">
                    <div class="showdata">{{showUser}}</div>
                    <div class="data" *ngFor="let data of userDatas">
                        <div class="image">
                            <img src="{{data.image}}" alt="">
                        </div>
                        <div class="detail">
                            <a (click)="viewprofile(data._id)"><h2>{{data.name}}</h2></a> 
                            <p>{{data.category}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </mat-tab>
        <mat-tab  label="Category">
            <div class="conatinerbox">
                <div class="resultbox">
                    <div class="showdata">{{showCategory}}</div>
                    <div class="data" *ngFor="let data of categoryData" >
                        <div class="image">
                            <img src="{{data.image}}" alt="">
                        </div>
                        <div class="detail">
                           <a (click)="viewprofile(data._id)"><h2>{{data.name}}</h2></a> 
                            <p>{{data.category}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Posts">
            <!-- <div class="conatinerbox">
                <div class="resultbox"> -->
                    <div class="showdata">{{showCategory}}</div>
                    <div *ngFor="let l of postData">
                        <div class="profilediv">
                            <div class="post" fxLayout="row wrap" fxLayoutAlign="center center">
                                <!-- <div class="postheading" fxFlex="80%" fxFlex.sm="100%"  fxFlex.xs="100%" fxLayoutAlign="space-between center">
                                    <div class="userdetail" fxLayout="row">
                                        <div>
                                            <img src="{{l.user[0].image}}" alt="" class="profileimg">
                                        </div> 
                                        <div class="profilename">
                                            <a (click)="viewprofile(l.user[0]._id)"><strong>{{l.user[0].name}}</strong></a>
                                            <p>{{l.date | date }}</p>
                                        </div>
                                    </div>
                                    <div *ngIf="userData._id==l.user[0]._id">
                                        <button class="menubutton" mat-button [matMenuTriggerFor]="Profileoption">
                                            <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #Profileoption="matMenu" xPosition="before">
                                            <button mat-menu-item (click)="removePost(l._id)">Remove post</button>
                                        </mat-menu>
                                    </div>
                                </div> -->
                                
                                <div class="postheading" fxFlex="100%" fxFlex.sm="100%"  fxFlex.xs="100%" fxLayoutAlign="space-between center">
                                    <div class="userdetail" fxFlex="100%" fxLayout="row"> 
                                        <div class="image" fxFlex="17.5%">
                                            <img src="{{l.user[0].image}}" alt="" class="profileimg">
                                        </div>
                                        <div class="profilename" fxFlex="65%">
                                            <a (click)="viewprofile(l.user[0]._id)"><strong>{{l.user[0].name}}</strong></a>
                                            <p>{{l.date | date }}</p>
                                        </div>
                                        <div class="postOptions" fxFlex="15%" *ngIf="userData._id==l.user[0]._id">
                                            <button class="menubutton" mat-button [matMenuTriggerFor]="Profileoption">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #Profileoption="matMenu" xPosition="before">
                                                <button mat-menu-item (click)="removePost(l._id)">Remove post</button>
                                            </mat-menu>
                                        </div>
                                    </div>  
                                </div>
                                <div class="postcontent" fxFlex="65%" fxFlex.xs="90%">
                                    <div class="description">
                                        <p>
                                            {{l.description}}
                                        </p>
                                    </div>
                                    <div class="postimage">
                                        <img src="http://localhost:3000/images/{{l._id}}.jpg" alt="">      
                                    </div>
                                    <div class="feedback">
                                        <div><button (click)="getComment(l._id)"><mat-icon> comment</mat-icon></button></div>
                                        <!-- <div class="likecount"><span>{{l.like.length}}</span></div> -->
                                        <div><button  (click)="onLike(l._id)"><mat-icon [ngStyle]="{ color :l.like.includes(userId) ? 'red' :'white'}">favorite</mat-icon></button></div>
                                        <div class="likecount"><span>{{l.like.length}}</span></div>
                                    </div>
                                    <div class="commentDiv">
                                        <ng-template [ngIf]="l.allComment" [ngIfElse]="comment">
                                            <div fxLayout="row wrap" class="commentDisplay" *ngFor="let c of l.allComments">
                                                <div class="commentauther" fxLayout="row wrap">
                                                    <div class="autherimg" >
                                                        <img src="{{c.user[0].image}}" alt="">
                                                    </div>
                                                    <div class="authername">
                                                        <strong>{{c.username}}</strong>
                                                        <p>{{c.date | date}}</p>
                                                    </div>
                                                    <div class="commentoption">
                                                        <button class="menubutton" mat-button [matMenuTriggerFor]="Profileoption"><mat-icon>linear_scale</mat-icon></button>
                                                        <mat-menu #Profileoption="matMenu"   yPosition="above" xPosition="before">
                                                            <button mat-menu-item (click)="editComment(c._id,l._id)" *ngIf="userId==c.userId">Edit</button>
                                                            <button mat-menu-item (click)="deleteComment(c._id,l._id)">Delete</button>
                                                        </mat-menu>
                                                    </div>
                                                </div>
                                                
                                                <div class="comment">
                                                    <p>{{c.comment}}</p>
                                                </div>
                                                
                                            </div>
                                        </ng-template>
                                        <ng-template #comment>
                                            <!-- <div fxLayout="row wrap" class="commentDisplay" *ngFor="let c of l.comment">
                                                <div class="commentauther" fxLayout="row wrap">
                                                    <div class="autherimg" >
                                                        <img src="{{c.image}}" alt="">
                                                    </div>
                                                    <div class="authername">
                                                        <strong>{{c.username}}</strong>
                                                        <p>{{c.date | date}}</p>
                                                    </div>
                                                </div>
                                                <div class="comment">
                                                    <p>{{c.comment}}</p>
                                                </div>
                                                <div>
                                                    <button class="menubutton" mat-button [matMenuTriggerFor]="Profileoption"><mat-icon>more_vert</mat-icon></button>
                                                    <mat-menu #Profileoption="matMenu"   yPosition="above" xPosition="before">
                                                        <button mat-menu-item (click)="editComment(c._id,l._id)" *ngIf="userId==c.userId">Edit</button>
                                                        <button mat-menu-item (click)="deleteComment(c._id,l._id)">Delete</button>
                                                    </mat-menu>
                                                </div>
                                            </div> -->
                                        </ng-template>
                                        <div fxLayout="row wrap" class="commentDisplay">
                                            <div class="commentauther" fxLayout="row wrap">
                                                <div class="autherimg">
                                                    <img src="{{userData.image}}" alt="">
                                                </div>
                                                <div class="username">
                                                    <strong>{{userData.name}}</strong>
                                                </div>
                                            </div>
                                            <div class="comment">
                                                <input type="text" placeholder="Write your comment" [(ngModel)]="commentvalue"><button (click)="postComment(l._id)">Post</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                <!-- </div>
            </div> -->
        </mat-tab>
    </mat-tab-group>
</div>
